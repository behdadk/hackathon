<!doctype html>
<html>
	<head>
		<title>Line Chart</title>
		<script src="src/Chart.js"></script>
        <link rel="stylesheet" href="style/style.css">	</head>
	<body>
        
        <section class="content">
            <div class="chart-header">Unique views</div>
            <div class="chart">
                    <canvas id="simplechart"></canvas>
            </div>
        </section>
        <section class="sidebar">
            <div class="legend-header"><span class="legend-label">Variants</span><span class="visitors-label">Views</span></div>
            <div id="js-legend"></div>
        </section>


	<script>
        
        function getRandColor(brightness){
            //6 levels of brightness from 0 to 5, 0 being the darkest
            var rgb = [Math.random() * 256, Math.random() * 256, Math.random() * 256];
            var mix = [brightness*51, brightness*51, brightness*51]; //51 => 255/5
            var mixedrgb = [rgb[0] + mix[0], rgb[1] + mix[1], rgb[2] + mix[2]].map(function(x){ return Math.round(x/2.0)})
            newColor = "rgba(" + mixedrgb.join(",") + ",1)";
            return "rgba(" + mixedrgb.join(",") + ",1)";
          }
        var newColor;
		var lineChartData = {
			labels : ["8:30","9:00","9:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30"],
			datasets : [
				{
                    label: "Control",
					fillColor : "rgba(242,96,119,0)",
					strokeColor : getRandColor(4.5),
					pointColor : newColor,
					pointStrokeColor : "#fff",
					pointHighlightFill : "#fff",
					pointHighlightStroke : newColor,
					data : [99,86,68,75,59,54,41,36,35,35,33,35,30]
				},
				{
					label: "Variant 1",
					fillColor : "rgba(104,188,54,0)",
					strokeColor : getRandColor(4.5),
					pointColor : newColor,
					pointStrokeColor : "#fff",
					pointHighlightFill : "#fff",
					pointHighlightStroke : newColor,
					data : [0,0,0,10,19,20,30,25,27,31,36,31,34]
				},
                {
					label: "Variant 2",
					fillColor : "rgba(151,187,205,0)",
					strokeColor : getRandColor(4.5),
					pointColor : newColor,
					pointStrokeColor : "#fff",
					pointHighlightFill : "#fff",
					pointHighlightStroke : newColor,
					data : [0,0,0,0,0,1,12,8,27,26,36,32,29]
				},
                 {
					label: "Variant 3",
					fillColor : "rgba(0,192,191,0)",
					strokeColor : getRandColor(4.5),
					pointColor : newColor,
					pointStrokeColor : "#fff",
					pointHighlightFill : "#fff",
					pointHighlightStroke : newColor,
					data : [0,0,5,18,23,21,19,21,28,31,36,35,31]
				}
			]

		}

	window.onload = function(){
		var ctx = document.getElementById("simplechart").getContext("2d");
        
		var myLine = new Chart(ctx).Line(lineChartData, {
			responsive: true
		});
        
        document.getElementById('js-legend').innerHTML = myLine.generateLegend();
	}
	</script>
	</body>
</html>
